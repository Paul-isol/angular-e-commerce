import { createFeature, createReducer, on, State } from "@ngrx/store";
import { UserProfile } from "../types/profile.type"
import { profileActions } from "./profile-action";

export type PorofileState = {
    profile: UserProfile | null;
    loading: boolean;
    error: string | null;
}
const InitialProfileState: PorofileState ={
    profile: null,
    loading: false,
    error:null,
}

export const profileFeature = createFeature({
    name: 'profile',
    reducer: createReducer(
        InitialProfileState,
        on(profileActions.load, (state)=>({
            ...state,
            loading:true,
            error:null,
        })),
        on(profileActions.loadSuccess, (state, {profile})=> ({
            ...state,
            loading:false,
            profile
        })),
        on(profileActions.loadFailure, (state, {error})=>({
            ...state,
            loading:false,
            error
        })
        )
    )
})